<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Odometro y Horas Motor</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="./app.js"></script>
  </head>
  <body>
    <div class="app">
      <header class="toolbar">
        <h1>Odometro y Horas Motor</h1>
        <div class="controls">
          <label>
            Lookback dias
            <input id="lookbackDays" type="number" min="1" max="365" value="30" />
          </label>
          <label>
            RegionId
            <input id="regionId" type="number" min="1" value="2" />
          </label>
          <label class="token">
            MyAdmin Bearer token
            <input id="myadminToken" type="password" autocomplete="off" />
          </label>
          <button id="refreshBtn" type="button">Actualizar</button>
          <button id="downloadBtn" type="button">Descargar Excel</button>
        </div>
      </header>

      <p id="statusLine" class="status">Listo.</p>
      <div class="summary">
        <div class="summary-card">
          <strong>odometro</strong>
          <span id="countOdometer">ODOMETRO: 0</span>
          <span id="countGpsOdometer">GPS: 0</span>
        </div>
        <div class="summary-card">
          <strong>HorasMotor</strong>
          <span id="countMotor">MOTOR: 0</span>
          <span id="countGpsMotor">GPS: 0</span>
        </div>
      </div>

      <div class="tabs">
        <button id="tabOdometer" class="tab active" type="button">Odometro</button>
        <button id="tabEngine" class="tab" type="button">HorasMotor</button>
      </div>
      <div class="tab-filters">
        <label>
          Filtro Odometro
          <select id="odometerSourceFilter">
            <option value="ALL">Todos</option>
            <option value="ODOMETRO">ODOMETRO</option>
            <option value="GPS">GPS</option>
          </select>
        </label>
        <label>
          Filtro HorasMotor
          <select id="engineSourceFilter">
            <option value="ALL">Todos</option>
            <option value="MOTOR">MOTOR</option>
            <option value="GPS">GPS</option>
          </select>
        </label>
      </div>

      <section id="odometerSection">
        <h2>Odometro</h2>
        <div class="table-wrap">
          <table id="odometerTable">
            <thead>
              <tr>
                <th data-sort-key="vehicle">vehiculo</th>
                <th data-sort-key="brandModel">marca modelo</th>
                <th data-sort-key="source">fuente</th>
                <th data-sort-key="odometerKm">odometro_km</th>
                <th data-sort-key="ageMinutes">hace_cuanto</th>
                <th data-sort-key="dataDate">fecha_dato</th>
                <th data-sort-key="odometerSupported">Soportado</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section id="engineSection" class="hidden">
        <h2>HorasMotor</h2>
        <div class="table-wrap">
          <table id="engineTable">
            <thead>
              <tr>
                <th data-engine-sort-key="vehicle">vehiculo</th>
                <th data-engine-sort-key="brandModel">marca modelo</th>
                <th data-engine-sort-key="engineSource">motor</th>
                <th data-engine-sort-key="engineHours">horas_motor</th>
                <th data-engine-sort-key="engineAgeMinutes">hace_cuanto</th>
                <th data-engine-sort-key="engineDate">fecha_dato</th>
                <th data-engine-sort-key="engineSupported">Soportado</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </div>
  </body>
</html>
